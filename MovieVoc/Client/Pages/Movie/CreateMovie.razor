@page "/movie/create"
@inject NavigationManager navigationManager
@inject MovieRepository movieRepository

<h3>CreateMovie</h3>
<MatButton>Test</MatButton>

<EditForm Model="Movie" OnValidSubmit="saveMovie">
    <DataAnnotationsValidator />
    <div class="form-group">
        <label>Titel:</label>
        <div>
            <InputText class="form-control" @bind-Value="@Movie.Title" />
            <ValidationMessage For="@(() => Movie.Title)" />
        </div>
    </div>

    <div>
        <label>Zusammenfassung:</label>
        <textarea class="form-control" @bind ="Movie.Summary" rows="4" cols="50"></textarea>

        <ValidationMessage For="@(() => Movie.Summary)" />

    </div>

    <div class="form-group">
        <label>Veröffentlichungsdatum:</label>
        <div>
            <InputDate type ="date" class="form-control"  @bind-Value="@Movie.ReleaseDate" />
            <ValidationMessage For="@(() => Movie.Poster)" />
            <ValidationMessage For="@(() => Movie.Poster)" />
        </div>
    </div>
    <div class="form-group">
        <label>Poster:</label>
        <div>
            <InputText class="form-control" @bind-Value="@Movie.Poster" />
            <ValidationMessage For="@(() => Movie.Poster)" />
        </div>
    </div>

    <button class="btn btn-primary" type="submit">Save Movie</button>
</EditForm>

@code {

    private MovieDTO Movie = new MovieDTO();
    
    

    private async Task saveMovie()
    {
        
        try
        {
            Console.WriteLine("Save Movie" + Movie.Title);
            var movieId = await movieRepository.CreateMovie(Movie);
            Console.WriteLine(Movie);

        }
        catch (Exception ex)
        {

        }

            
    }
    

}
